generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model accessorydetail {
  id            Int     @id @default(autoincrement())
  accessoryType String?
  dimensions    String?
  weight        String?
  productId     Int     @unique(map: "AccessoryDetail_productId_key")
  product       product @relation(fields: [productId], references: [id], onDelete: Cascade, map: "AccessoryDetail_productId_fkey")
}

model brand {
  id                         Int      @id @default(autoincrement())
  brand_name                 String?  @db.VarChar(255)
  brand_website              String   @db.VarChar(255)
  catalog_details            String?  @db.VarChar(255)
  brand_logo                 String?  @db.VarChar(255)
  document_proof             String?  @db.VarChar(255)
  average_mrp                String?  @db.VarChar(50)
  average_selling_price      String?  @db.VarChar(50)
  brand_catalog_width        String?  @db.VarChar(50)
  average_monthly_turnover   String?  @db.VarChar(50)
  percentage_online_business String?  @db.VarChar(50)
  years_of_operation         String?  @db.VarChar(50)
  usp                        String?  @db.VarChar(255)
  myntra_for_earth           String?  @db.VarChar(50)
  primary_category           String?  @db.VarChar(255)
  secondary_category         String?  @db.VarChar(255)
  created_at                 DateTime @db.DateTime(0)
  updated_at                 DateTime @db.DateTime(0)
  seller_id                  Int?
  seller                     seller?  @relation(fields: [seller_id], references: [id], onDelete: Cascade, map: "brand_ibfk_1")

  @@index([seller_id], map: "seller_id")
}

model brand_category {
  id                 Int       @id @default(autoincrement())
  brand_id           Int
  primary_category   String?   @db.VarChar(255)
  secondary_category String?   @db.VarChar(255)
  third_category     String?   @db.VarChar(255)
  created_at         DateTime? @default(now()) @db.Timestamp(0)
  updated_at         DateTime? @default(now()) @db.Timestamp(0)
  brands             brands    @relation(fields: [brand_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_brand_category")

  @@index([brand_id], map: "fk_brand_category")
}

model brands {
  id                         Int              @id @default(autoincrement())
  seller_id                  Int
  brand_name                 String?          @db.VarChar(255)
  brand_website              String           @db.VarChar(255)
  catalog_details            String?          @db.VarChar(255)
  brand_logo                 String?          @db.VarChar(255)
  document_proof             String?          @db.VarChar(255)
  average_mrp                String?          @db.VarChar(50)
  average_selling_price      String?          @db.VarChar(50)
  brand_catalog_width        String?          @db.VarChar(50)
  average_monthly_turnover   String?          @db.VarChar(50)
  percentage_online_business String?          @db.VarChar(50)
  years_of_operation         String?          @db.VarChar(50)
  usp                        String?          @db.VarChar(255)
  myntra_for_earth           String?          @db.VarChar(50)
  primary_category           String?          @db.VarChar(255)
  secondary_category         String?          @db.VarChar(255)
  created_at                 DateTime?        @default(now()) @db.Timestamp(0)
  updated_at                 DateTime?        @default(now()) @db.Timestamp(0)
  brand_category             brand_category[]
  sellers                    sellers          @relation(fields: [seller_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_brand_seller")

  @@index([seller_id], map: "fk_brand_seller")
}

model clothingdetail {
  id               Int     @id @default(autoincrement())
  material         String?
  fabric           String?
  pattern          String?
  collarType       String?
  sleeveType       String?
  fit              String?
  occasion         String?
  season           String?
  careInstructions String?
  productId        Int     @unique(map: "ClothingDetail_productId_key")
  product          product @relation(fields: [productId], references: [id], onDelete: Cascade, map: "ClothingDetail_productId_fkey")
}

model footweardetail {
  id            Int     @id @default(autoincrement())
  footwearType  String?
  heelHeight    String?
  soleMaterial  String?
  upperMaterial String?
  closure       String?
  productId     Int     @unique(map: "FootwearDetail_productId_key")
  product       product @relation(fields: [productId], references: [id], onDelete: Cascade, map: "FootwearDetail_productId_fkey")
}

model product {
  id                Int              @id @default(autoincrement())
  productName       String
  brand             String
  productType       String
  gender            String
  category          String
  subcategory       String
  mrp               String
  sellingPrice      String
  discountPercent   String?
  sku               String
  hsnCode           String?
  totalStock        String
  shortDescription  String
  description       String
  lowStockAlert     String?
  metaTitle         String?
  metaDescription   String?
  tags              String?
  imageUrl          String?
  status            String?
  shippingWeight    String?
  packageDimensions String?
  returnPolicy      String?
  shippingClass     String?
  createdAt         DateTime         @default(now())
  updatedAt         DateTime
  userId            Int?
  accessorydetail   accessorydetail?
  clothingdetail    clothingdetail?
  footweardetail    footweardetail?
  users             users?           @relation(fields: [userId], references: [UserID], map: "fk_product_user")
  productimage      productimage[]
  variant           variant[]
  cartitem          cartitem[]
  wishlist          wishlist[]

  @@index([userId], map: "idx_product_userId")
}

model productimage {
  id        Int      @id @default(autoincrement())
  url       String
  isPrimary Boolean  @default(false)
  productId Int
  createdAt DateTime @default(now())
  product   product  @relation(fields: [productId], references: [id], onDelete: Cascade, map: "ProductImage_productId_fkey")

  @@index([productId], map: "ProductImage_productId_fkey")
}

model roles {
  RoleID   Int     @id @default(autoincrement())
  RoleName String  @unique(map: "RoleName") @db.VarChar(100)
  users    users[]
}

model seller {
  id                    Int      @id @default(autoincrement())
  user_id               Int
  gst                   String   @unique(map: "gst") @db.VarChar(20)
  organization_email    String?  @db.VarChar(255)
  primary_contact_name  String?  @db.VarChar(120)
  primary_contact_phone String?  @db.VarChar(20)
  primary_contact_email String?  @db.VarChar(255)
  business_owner_name   String?  @db.VarChar(120)
  owner_contact_number  String?  @db.VarChar(20)
  owner_email           String?  @db.VarChar(255)
  signature             String?  @db.VarChar(255)
  warehouse_address     String?  @db.Text
  warehouse_city        String?  @db.VarChar(120)
  warehouse_state       String?  @db.VarChar(120)
  warehouse_pincode     String?  @db.VarChar(10)
  account_holder_name   String?  @db.VarChar(120)
  account_number        String?  @db.VarChar(40)
  ifsc                  String?  @db.VarChar(20)
  bank_name             String?  @db.VarChar(120)
  account_type          String?  @db.VarChar(20)
  cancelled_cheque      String?  @db.VarChar(255)
  brand_name            String?  @db.VarChar(255)
  brand_description     String?  @db.Text
  number_of_brands      Int?
  declaration_accepted  Boolean  @default(false)
  created_at            DateTime @db.DateTime(0)
  updated_at            DateTime @db.DateTime(0)
  brand                 brand[]
}

model sellers {
  id                    Int       @id @default(autoincrement())
  user_id               Int
  gst                   String    @unique(map: "gst") @db.VarChar(20)
  organization_email    String?   @db.VarChar(255)
  primary_contact_name  String?   @db.VarChar(120)
  primary_contact_phone String?   @db.VarChar(20)
  primary_contact_email String?   @db.VarChar(255)
  business_owner_name   String?   @db.VarChar(120)
  owner_contact_number  String?   @db.VarChar(20)
  owner_email           String?   @db.VarChar(255)
  signature             String?   @db.VarChar(255)
  warehouse_address     String?   @db.Text
  warehouse_city        String?   @db.VarChar(120)
  warehouse_state       String?   @db.VarChar(120)
  warehouse_pincode     String?   @db.VarChar(10)
  account_holder_name   String?   @db.VarChar(120)
  account_number        String?   @db.VarChar(40)
  ifsc                  String?   @db.VarChar(20)
  bank_name             String?   @db.VarChar(120)
  account_type          String?   @db.VarChar(20)
  cancelled_cheque      String?   @db.VarChar(255)
  brand_name            String?   @db.VarChar(255)
  brand_description     String?   @db.Text
  number_of_brands      Int?
  declaration_accepted  Boolean   @default(false)
  created_at            DateTime? @default(now()) @db.Timestamp(0)
  updated_at            DateTime? @default(now()) @db.Timestamp(0)
  brands                brands[]
  users                 users     @relation(fields: [user_id], references: [UserID], onDelete: Cascade, onUpdate: NoAction, map: "fk_seller_user")

  @@index([user_id], map: "fk_seller_user")
}

model users {
  UserID       Int       @id @default(autoincrement())
  Username     String    @unique(map: "Username") @db.VarChar(100)
  Email        String    @unique(map: "Email") @db.VarChar(150)
  PasswordHash String    @db.VarChar(255)
  RoleID       Int
  IsActive     Boolean?  @default(true)
  CreatedAt    DateTime? @default(now()) @db.DateTime(0)
  UpdatedAt    DateTime? @default(now()) @db.DateTime(0)
  product      product[]
  sellers      sellers[]
  roles        roles     @relation(fields: [RoleID], references: [RoleID], onDelete: Cascade, map: "FK_Users_Roles")
  cart         cart?
  wishlist     wishlist[]
  address      address[]

  @@index([RoleID], map: "FK_Users_Roles")
}

model variant {
  id        Int      @id @default(autoincrement())
  size      String?
  color     String?
  stock     Int
  price     String
  sku       String?
  productId Int
  createdAt DateTime @default(now())
  product   product  @relation(fields: [productId], references: [id], onDelete: Cascade, map: "Variant_productId_fkey")
  cartitem  cartitem[]

  @@index([productId], map: "Variant_productId_fkey")
}

model cart {
  id        Int       @id @default(autoincrement())
  userId    Int       @unique
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  users     users     @relation(fields: [userId], references: [UserID], onDelete: Cascade, map: "fk_cart_user")
  items     cartitem[]

  @@index([userId], map: "idx_cart_userId")
}

model cartitem {
  id         Int       @id @default(autoincrement())
  cartId     Int
  productId  Int
  variantId  Int?
  quantity   Int       @default(1)
  unitPrice  String
  createdAt  DateTime  @default(now())
  updatedAt  DateTime  @updatedAt
  cart       cart      @relation(fields: [cartId], references: [id], onDelete: Cascade, map: "fk_cartitem_cart")
  product    product   @relation(fields: [productId], references: [id], onDelete: Cascade, map: "fk_cartitem_product")
  variant    variant?  @relation(fields: [variantId], references: [id], onDelete: SetNull, map: "fk_cartitem_variant")

  @@index([cartId], map: "idx_cartitem_cartId")
  @@index([productId], map: "idx_cartitem_productId")
  @@index([variantId], map: "idx_cartitem_variantId")
  @@unique([cartId, productId, variantId], map: "uniq_cart_product_variant")
}

model wishlist {
  id        Int      @id @default(autoincrement())
  userId    Int
  productId Int
  createdAt DateTime @default(now())
  users     users    @relation(fields: [userId], references: [UserID], onDelete: Cascade, map: "fk_wishlist_user")
  product   product  @relation(fields: [productId], references: [id], onDelete: Cascade, map: "fk_wishlist_product")

  @@unique([userId, productId], map: "uniq_user_product")
  @@index([userId], map: "idx_wishlist_userId")
  @@index([productId], map: "idx_wishlist_productId")
}

model address {
  id           Int      @id @default(autoincrement())
  userId       Int
  firstName    String
  lastName     String?
  mobileNumber String
  pincode      String
  houseNo      String
  street       String
  city         String
  state        String
  isDefault    Boolean  @default(false)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  user         users    @relation(fields: [userId], references: [UserID], onDelete: Cascade, map: "fk_address_user")

  @@index([userId], map: "idx_address_userId")
}
